import{j as r,r as v}from"./index-PhQE6UyQ.js";import{a as $}from"./index-ngrFHoWO.js";import{j as F,l as S,R as w,f as A}from"./index-DUnzQs1n.js";const D="2e752f37406da1a688f2cc68",_="https://v6.exchangerate-api.com/v6/",b=$.create({baseURL:`${_}${D}`}),d={status:0,data:{},error:{},result:""},f=async t=>{try{const o=await b.get(t);o!=null&&(d.status=await o.status,d.data=await o.data,d.result=await o.data.conversion_result.toFixed(2))}catch(o){d.status=await o.response.status,d.error=await o.response.data,console.error("Error Message ",o.message),console.error("Error Status ",o.response.status),console.error("Error Data ",o.response.data)}return d},g={amount:"0",from:"USD",to:"INR",result:0},x=["USD","EUR","INR","GBP","AUD"],R=()=>{const[t,o]=v.useState(g),[u,i]=v.useState(null),[p,m]=v.useState(!1),y=s=>{s.preventDefault();try{const{name:e,value:n}=s.target;o(a=>({...a,[e]:n}))}catch(e){i(e),console.error("Error Message ",e.message),console.error("Error Status ",e.response.status),console.error("Error Data ",e.response.data)}},h=s=>{s.preventDefault();try{const{name:e,value:n}=s.target;o(a=>({...a,[e]:n}))}catch(e){i(e),console.error("Error Message ",e.message),console.error("Error Status ",e.response.status),console.error("Error Data ",e.response.data)}},j=async s=>{m(!0);try{s.preventDefault();const{amount:e,from:n,to:a}=t;if(e===void 0||e==="0"){alert("Please enter Amount");return}else if(n===void 0||n===""){alert("Please select From Currency");return}else if(a===void 0||a===""){alert("Please select To Currency");return}else{const c=await f(`pair/${n}/${a}/${e}`);if(c!=null&&c.data!=null&&c.status===200){console.log(c.data);const{conversion_result:l}=c.data;await o(C=>({...C,result:l.toFixed(2)}))}else i("Error while converting currency")}}catch(e){i("Error while converting currency"),console.error("Error Message ",e.message),console.error("Error Status ",e.response.status),console.error("Error Data ",e.response.data)}m(!1)};return r.jsx("section",{className:"cc-container",children:r.jsxs("div",{className:"cc-div",children:[r.jsx("div",{children:r.jsx("h2",{children:"Currency Converter"})}),r.jsx("div",{children:r.jsxs("label",{htmlFor:"currency_amount",children:["Amount:",r.jsx("input",{id:"currency_amount",name:"amount",type:"number",value:t.amount,onChange:s=>y(s)})]})}),r.jsxs("div",{className:"cc-selector",children:[r.jsxs("label",{htmlFor:"currency_from",children:["From:",r.jsx("select",{id:"currency_from",name:"from",value:t.from,onChange:s=>h(s),children:x.map((s,e)=>r.jsx("option",{value:s,children:s},e))})]}),r.jsxs("label",{htmlFor:"currency_to",children:["From:",r.jsx("select",{id:"currency_to",name:"to",value:t.to,onChange:s=>h(s),children:x.map((s,e)=>r.jsx("option",{value:s,children:s},e))})]})]}),r.jsx("button",{disabled:p||t.amount<=0,onClick:s=>j(s),children:p?r.jsx("div",{class:"loader",children:"Converting..."}):"Convert"}),r.jsx("hr",{}),t.result&&r.jsx("div",{children:r.jsx("h2",{children:`${t.amount} ${t.from} = ${t.result}
              ${t.to}`})}),u&&r.jsx("h2",{children:u})]})})},P=()=>{const[t,o]=v.useState(g),u=e=>{e.preventDefault();const{name:n,value:a}=e.target;o(c=>({...c,[n]:a}))},i=e=>{e.preventDefault();const{name:n,value:a}=e.target;o(c=>({...c,[n]:a}))},{data:p,isLoading:m,isError:y,Error:h,refetch:j}=A({queryKey:["currency"],queryFn:async()=>await f(`pair/${t.from}/${t.to}/${t.amount}`),enabled:!1}),s=async e=>{try{e.preventDefault();const{amount:n,from:a,to:c}=t;if(n===void 0||n==="0"){alert("Please enter Amount");return}else if(a===void 0||a===""){alert("Please select From Currency");return}else if(c===void 0||c===""){alert("Please select To Currency");return}else{const l=await j();if(l!=null&&l.data!=null&&l.status==="success"&&l.data.data!=null){console.log(l.data);const{conversion_result:C}=l.data.data;await o(E=>({...E,result:C?.toFixed(2)}))}}}catch(n){console.error(`Error while converting currency ${n}`),console.error("Error Message ",n.message),console.error("Error Status ",n.status),console.error("Error Data ",n.data)}};return r.jsx("section",{className:"cc-container",children:r.jsxs("div",{className:"cc-div",children:[r.jsx("div",{children:r.jsx("h2",{children:"Currency Converter"})}),r.jsx("div",{children:r.jsxs("label",{htmlFor:"currency_amount",children:["Amount:",r.jsx("input",{id:"currency_amount",name:"amount",type:"number",value:t.amount,onChange:e=>u(e)})]})}),r.jsxs("div",{className:"cc-selector",children:[r.jsxs("label",{htmlFor:"currency_from",children:["From:",r.jsx("select",{id:"currency_from",name:"from",value:t.from,onChange:e=>i(e),children:x.map((e,n)=>r.jsx("option",{value:e,children:e},n))})]}),r.jsxs("label",{htmlFor:"currency_to",children:["From:",r.jsx("select",{id:"currency_to",name:"to",value:t.to,onChange:e=>i(e),children:x.map((e,n)=>r.jsx("option",{value:e,children:e},n))})]})]}),r.jsx("button",{disabled:m||t.amount<=0,onClick:e=>s(e),children:m?r.jsx("div",{className:"loader",children:"Converting..."}):"Convert"}),r.jsx("hr",{}),t.result>0&&r.jsx("div",{children:r.jsx("h2",{children:`${t.amount} ${t.from} = ${t.result}
              ${t.to}`})}),y?h&&r.jsx("h2",{children:h}):""]})})},L=t=>{const{APICallingWay:o}=t,u=new F;return o==="reactquery"?r.jsxs(S,{client:u,children:[r.jsx(P,{}),r.jsx(w,{initialIsOpen:!0})]}):r.jsx(R,{})};export{L as default};
