import{j as e,r as x}from"./index-CghHssDd.js";import{a as P}from"./index-ngrFHoWO.js";let D="https://jsonplaceholder.typicode.com";const y=P.create({baseURL:D}),j=async r=>await y.post("/posts",r),b=async()=>await y.get("/posts"),S=r=>y.put(`/posts/${r.id}`,r),A=async r=>await y.delete(`/posts/${r}`),C=r=>{const c="axios",{data:d,getEditPostData:a,deletePostData:i}=r;function u(n,g){n.preventDefault(),console.log("Edit");try{a(g)}catch(l){console.error("Error Message ",l.message),console.error("Error Status ",l.response.status),console.error("Error Data ",l.response.data)}}function p(n,g){n.preventDefault(),console.log("Delete");try{c==="axios"&&i(g)}catch(l){console.error("Error Message ",l.message),console.error("Error Status ",l.response.status),console.error("Error Data ",l.response.data)}}return e.jsxs("li",{children:[e.jsxs("p",{children:["Title: ",d.title]}),e.jsxs("p",{children:["Body: ",d.body]}),e.jsx("button",{onClick:n=>u(n,d),children:"Edit"}),e.jsx("button",{className:"btn-delete",onClick:n=>p(n,d.id),children:"Delete"})]})},M=r=>{const{lstData:c,getEditPostData:d,deletePostData:a}=r;return console.log(c),e.jsx("ol",{children:c.map(i=>{const{id:u}=i;return e.jsx(C,{data:i,getEditPostData:d,deletePostData:a},u)})})},v=r=>{const c="axios",{addPostData:d,getEditPostData:a,putPostData:i}=r,u={userId:1,title:"",body:""},[p,n]=x.useState(u);function g(t){const{name:o,value:h}=t.target;n(m=>({...m,[o]:h}))}function l(t){console.log("Post");try{c==="axios"&&d(t)}catch(o){console.error("Error Message ",o.message),console.error("Error Status ",o.response.status),console.error("Error Data ",o.response.data)}}let E=a.title!=="";x.useEffect(()=>{try{console.log("Edit"),E&&n(t=>({...t,id:a.id,title:a.title,body:a.body}))}catch(t){console.log(t)}},[a]);function f(t){console.log("Put");try{c==="axios"&&i(t)}catch(o){console.error("Error Message ",o.message),console.error("Error Status ",o.response.status),console.error("Error Data ",o.response.data)}}function s(t){t.preventDefault();try{t.nativeEvent.submitter.value==="Add"?l(p):f(p),n(u)}catch(o){console.error("Error Message ",o.message),console.error("Error Status ",o.response.status),console.error("Error Data ",o.response.data)}}return e.jsxs("form",{onSubmit:t=>s(t),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title"}),e.jsx("input",{type:"text",autoComplete:"off",id:"title",name:"title",placeholder:"Title",value:p.title,onChange:t=>g(t)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"body"}),e.jsx("input",{type:"text",autoComplete:"off",id:"body",name:"body",placeholder:"Body",value:p.body,onChange:t=>g(t)})]}),e.jsx("button",{type:"submit",value:E?"Update":"Add",children:E?"Update":"Add"})]})},w=()=>{const r="axios",c={userId:1,id:0,title:"",body:""},d=[c],[a,i]=x.useState(d);x.useEffect(()=>{console.log("Load");try{r==="axios"&&u()}catch(s){console.error("Error Message ",s.message),console.error("Error Status ",s.response.status),console.error("Error Data ",s.response.data)}},[]);const u=async()=>{const s=await b();i(s.data),console.log(a),console.log("Post loaded successfully")},p=async s=>{const t=await j(s);t.status===201?(console.log("Post added successfully"),i([...a,t.data])):(console.error("Error Message ",t.error.message),console.error("Error Status ",t.error.status),console.error("Failed to add post"))},n=async s=>{const t=await A(s);t.status===200?(console.log("Post deleted successfully"),i(a.filter(o=>o.id!==s))):(console.error("Error Message ",t.error.message),console.error("Error Status ",t.error.status),console.error("Failed to delete post"))},[g,l]=x.useState(c),E=s=>{l(t=>({...t,userId:s.userId,id:s.id,title:s.title,body:s.body}))},f=async s=>{const t=await S(s);t.status===200?(console.log("Post updated successfully"),i(o=>o.map(h=>h.id===t.data.id?{...h,title:t.data.title,body:t.data.body}:h)),l(c)):(console.error("Error Message ",t.error.message),console.error("Error Status ",t.error.status),console.error("Failed to delete post"))};return e.jsxs("section",{className:"main-section",children:[e.jsx("section",{className:"section-form",children:e.jsx(v,{addPostData:p,getEditPostData:g,putPostData:f})}),e.jsx("section",{className:"section-post",children:e.jsx(M,{lstData:a,getEditPostData:E,deletePostData:n})})]})},F=()=>e.jsx("section",{children:e.jsx(w,{})});export{F as default};
